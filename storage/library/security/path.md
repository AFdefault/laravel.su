---
title: "Обход каталога"
description: "Не доверяйте даже имени файла, которое вы получаете от пользователя."
---

Обход каталога (Directory Traversal) - это атака, направленная на получение доступа к файлам путем изменения данных запроса. Это достигается за счет использования последовательностей `../` и их вариаций, а также абсолютных путей к файлам.

Если ваше приложение позволяет пользователям загружать файлы с сохранением оригинального имени файла, оно может столкнуться с уязвимостью Directory Traversal, если не проводится достаточная фильтрация входных данных для удаления информации о директории.

Давайте рассмотрим следующий пример кода:

```php
Route::get('/download', function(Request $request) {
    return response()->download(
        storage_path('content/').$request->input('filename')
    );
});
```

В данном случае имя файла не очищается от информации о директории, что означает, что некорректное имя файла, например, `../../.env`, может позволить злоумышленнику получить доступ к конфиденциальным данным вашего приложения.

Чтобы избежать этого, необходимо использовать функцию PHP `basename` для очистки информации о директории, например:

```php
Route::get('/download', function(Request $request) {
    return response()->download(
        storage_path('content/').basename($request->input('filename'))
    );
});
```
