---
title: "Обход каталога"
description: ""
---

Атака Обход каталога (пути) направлена на доступ к файлам путем манипулирования данными запроса с использованием последовательностей `../` и их вариаций, а также абсолютных путей к файлам.

Если вы разрешаете пользователям загружать файлы по имени файла, вы можете столкнуться с этой уязвимостью, если входные данные не очищены от информации о директории.

Рассмотрим следующий код:

```php
Route::get('/download', function(Request $request) {
    return response()->download(
        storage_path('content/').$request->input('filename')
    );
});
```

Здесь имя файла не очищено от информации о директории, поэтому некорректное имя файла, такое как `../../.env`, может раскрыть учетные данные вашего приложения потенциальным злоумышленникам.

Что бы избежать этого, вы должны использовать функцию PHP `basename`, чтобы очистить информацию о директории, например:

```php
Route::get('/download', function(Request $request) {
    return response()->download(
        storage_path('content/').basename($request->input('filename'))
    );
});
```
