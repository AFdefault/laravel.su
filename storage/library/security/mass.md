## Массовое Присвоение

Массовое присвоение - это уязвимость, при которой паттерн ORM злоупотребляется для изменения элементов данных, которые пользователь обычно не должен иметь возможность изменять.

Рассмотрим следующий код:

```php
Route::any('/profile', function (Request $request) {
    $request->user()->forceFill($request->all())->save();

    $user = $request->user()->fresh();

    return response()->json(compact('user'));
})->middleware('auth');
```

Вышеуказанный маршрут профиля позволяет вошедшему в систему пользователю изменять информацию своего профиля.

Однако предположим, что в таблице пользователей есть столбец `is_admin`. Вероятно, вы не хотите, чтобы пользователь имел возможность изменять значение этого столбца. Однако вышеуказанный код позволяет пользователям изменять значения любых столбцов в их строке в таблице пользователей. Это уязвимость массового присвоения.

В Laravel по умолчанию встроены функции для защиты от этой уязвимости. Убедитесь в следующем, чтобы оставаться в безопасности:

- Квалифицируйте разрешенные параметры, которые вы хотите обновить, используя `$request->only` или `$request->validated`, а не `$request->all`.
- Не разблокируйте модели или не устанавливайте переменную `$guarded` в пустой массив. Сделав это, вы фактически отключаете встроенную защиту от массового присвоения Laravel.
- Избегайте использования методов, таких как `forceFill` или `forceCreate`, которые обходят механизм защиты. Однако вы можете использовать эти методы, если передаете проверенный массив значений.
